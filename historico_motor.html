<!doctype html>
<html lang="pt">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>IDMAR ‚Äî Hist√≥rico Motor</title>
  <link rel="icon" href="img/logo-pm.png" />

  <style>
    :root{--bg:#f8fafc;--fg:#0f172a;--bg-elev:#ffffff;--border:#e5e7eb;--link:#0b6bcb}
    html,body{height:100%}
    body{background:var(--bg);color:var(--fg);margin:0;display:flex;flex-direction:column;
         font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial,sans-serif}
    main{flex:1}
    .container{max-width:1100px;margin:1.25rem auto;padding:0 1rem}
    .panel{background:var(--bg-elev);border:1px solid var(--border);border-radius:12px;padding:1rem;margin:.75rem 0}
    table{width:100%;border-collapse:collapse;margin-top:.5rem}
    th,td{border-bottom:1px solid var(--border);padding:.6rem .5rem;text-align:left;vertical-align:middle}
    .filters{display:grid;grid-template-columns:1.4fr 200px 160px 1fr 1fr;gap:.5rem}
    .actions{display:flex;gap:.5rem;flex-wrap:wrap;margin-top:.5rem}
    .badge{display:inline-block;border-radius:999px;padding:.15rem .55rem;font-weight:600}
    .good{background:#10b98120;color:#065f46}
    .bad{background:#ef444420;color:#7f1d1d}
    .footer{border-top:1px solid var(--border);padding:1rem;text-align:left;opacity:.85;background:var(--bg-elev)}
    input,select,button{border:1px solid var(--border);background:#fff;border-radius:10px;padding:.5rem .6rem}
    button{cursor:pointer}
  </style>

  <!-- Gate -->
  <script>
    (function(){
      try{
        var ok = sessionStorage.getItem('IDMAR_SESSION')==='ok' || sessionStorage.getItem('NAV_SESSION')==='ok';
        if(!ok) location.replace('login.html');
      }catch(e){}
    })();
  </script>

<!-- i18n + header -->
<script defer src="js/idmar-i18n.js?v=1"></script>
<script defer src="js/idmar-header-only.all.v4.js?v=4"></script>

<!-- üîÅ COMPAT antes de tudo o resto -->

<!-- sanitiza√ß√£o e script da p√°gina -->
<script defer src="js/sanitize-historico-motor.r1.js?v=1"></script>
<script defer src="js/patch-motor-guard.r1.js?v=1"></script>

  <script defer src="js/history-compat.r1.js?v=1"></script>
<script defer src="js/sanitize-historico-motor.r1.js?v=1"></script>
<script defer src="js/historico-motor.r3b.js?v=r3b"></script>




</head>

<body>
  <!-- header √© injetado por JS -->

  <main class="container">
    <h1>Hist√≥rico ‚Äî Motores</h1>

    <section class="panel">
      <div class="filters">
        <input id="hist_motor_search" type="search" placeholder="Pesquisar (S/N / marca / modelo / texto)" />
        <select id="hist_motor_brand" aria-label="Marca">
          <option value="">Marca (todas)</option>
          <option>Yamaha</option><option>Honda</option><option>Suzuki</option><option>Tohatsu</option>
          <option>Mercury</option><option>MerCruiser</option><option>Volvo Penta</option>
          <option>Yanmar</option><option>Evinrude/Johnson</option>
        </select>
        <select id="hist_motor_state" aria-label="Estado">
          <option value="all">Estado (todos)</option>
          <option value="ok">V√°lido</option>
          <option value="bad">Inv√°lido</option>
        </select>
        <input id="hist_motor_from" type="date" placeholder="De" />
        <input id="hist_motor_to" type="date" placeholder="At√©" />
      </div>
      <div class="actions">
        <button id="hist_motor_csv">Exportar CSV</button>
        <button id="hist_motor_clear">Limpar hist√≥rico (Motor)</button>
      </div>
    </section>

    <section class="panel">
      <table>
        <thead>
          <tr>
            <th>Quando</th>
            <th>S/N</th>
            <th>Marca</th>
            <th>Modelo</th>
            <th>Estado</th>
            <th>Justifica√ß√£o</th>
            <th>Foto (nome)</th>
            <th>Miniatura</th>
          </tr>
        </thead>
        <tbody id="hist_motor_tbody"></tbody>
      </table>
    </section>
  </main>

  <footer class="footer" id="fallback-footer">IDMAR ‚Äî v2.2.7-baseline+merge-r2.3</footer>

  <!-- Removido idmar-layout.r3b.js -->

</body>
</html>
