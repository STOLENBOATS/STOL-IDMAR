<!doctype html>
<html lang="pt">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>IDMAR — Login</title>
  <link rel="icon" href="img/logo-pm.png"/>

  <!-- i18n + header com toggle PT/EN -->
  <script defer src="js/idmar-i18n.js?v=1"></script>
  <script defer src="js/idmar-header-only.all.v5.js?v=5"></script>

  <!-- Estilos simples (segue o baseline) -->
  <style>
    :root{--bg:#f8fafc;--fg:#0f172a;--bg-elev:#ffffff;--border:#e5e7eb;--link:#0b6bcb}
    html,body{height:100%}
    body{
      background:var(--bg); color:var(--fg); margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial,sans-serif;
      display:flex; flex-direction:column;
    }
    main{flex:1; display:grid; place-items:center; padding:2rem}
    .card{
      width:min(480px, 94vw);
      background:var(--bg-elev);
      border:1px solid var(--border);
      border-radius:14px;
      padding:1.25rem 1.25rem 1rem;
      box-shadow:0 2px 10px rgba(0,0,0,.03);
    }
    h1{margin:.25rem 0 .5rem 0}
    .small{opacity:.8; margin:0 0 1rem 0}
    label{display:block; margin:.6rem 0 .25rem}
    input[type="text"],input[type="password"]{
      width:100%; border:1px solid var(--border); background:#fff;
      border-radius:10px; padding:.6rem .7rem; font-size:1rem;
    }
    .row{display:flex; align-items:center; justify-content:space-between; gap:.75rem; margin-top:.75rem}
    .left{display:flex; align-items:center; gap:.45rem}
    button{
      background:#0b6bcb; color:#fff; border:none; border-radius:10px;
      padding:.6rem 1rem; cursor:pointer; font-weight:600;
    }
    a{color:var(--link); text-decoration:none}
    a:hover{text-decoration:underline}
    footer{border-top:1px solid var(--border); padding:1rem; text-align:left; opacity:.85; background:var(--bg-elev)}
  </style>

  <!-- (Opcional) Limpar sessão antiga ao abrir login -->
  <script>
    (function(){
      try{
        sessionStorage.removeItem('IDMAR_SESSION');
        sessionStorage.removeItem('NAV_SESSION');
      }catch(e){}
    })();
  </script>
</head>
<body>
  <main>
    <section class="card">
      <h1 data-i18n="login.title">Entrar</h1>
      <p class="small" data-i18n="login.lead">Aceda com as suas credenciais.</p>

      <label for="user" data-i18n="login.user_label">Utilizador</label>
      <input id="user" type="text" autocomplete="username" data-i18n-placeholder="login.user_ph" placeholder="nome.apelido"/>

      <label for="pass" data-i18n="login.pass_label">Palavra-passe</label>
      <input id="pass" type="password" autocomplete="current-password" data-i18n-placeholder="login.pass_ph" placeholder="••••••••"/>

      <div class="row">
        <label class="left">
          <input type="checkbox" id="remember"/>
          <span data-i18n="login.remember">Lembrar sessão</span>
        </label>
        <a href="#" data-i18n="login.forgot">Esqueci-me da palavra-passe</a>
      </div>

      <div class="row" style="margin-top:1rem">
        <div></div>
        <button id="btnLogin" data-i18n="login.signin">Iniciar sessão</button>
      </div>
    </section>
  </main>

  <footer>
    <div class="small">IDMAR · <span data-i18n="app.subtitle">Identificação Marítima — Cascos & Motores</span></div>
  </footer>

  <!-- Handler mínimo de login (simples) -->
  <script>
    (function(){
      function go(){
        try{
          // guarda a sessão simples
          sessionStorage.setItem('IDMAR_SESSION','ok');
        }catch(e){}
        // vai para o validador (ou para a página que preferires)
        location.href = 'validador.html';
      }
      document.getElementById('btnLogin')?.addEventListener('click', (e)=>{ e.preventDefault(); go(); });
      // Enter para submeter
      document.getElementById('pass')?.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ e.preventDefault(); go(); }});
    })();
  </script>
</body>
</html>
