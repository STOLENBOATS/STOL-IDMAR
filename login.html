<!doctype html>
<html lang="pt" data-theme="light">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>IDMAR ‚Äî Iniciar sess√£o</title>

  <!-- i18n + header no login -->
  <script defer src="js/idmar-i18n.js?v=1"></script>
  <script defer src="js/idmar-header-only.all.v4.js?v=4"></script>

  
  <!-- CSS base + tema claro s√≥brio -->
  <link rel="icon" href="img/favicon.png"/>
  <link rel="stylesheet" href="css/styles.css"/>
  <link rel="stylesheet" href="css/idmar-theme.css"/>

  <!-- One-file opcional (tema/i18n). Se n√£o usas, podes remover esta linha. -->
  <script src="js/idmar-one.r3.js"></script>

  <style>
    /* layout: footer no fundo */
    html, body { height: 100%; }
    body { display: flex; flex-direction: column; }
    main { flex: 1 0 auto; }

    /* header compacto */
    .brandbar{display:flex;align-items:center;gap:.75rem;padding:1rem 1.25rem;border-bottom:1px solid var(--border);background:var(--bg-elev)}
    .brandbar img{height:40px}
    .brandbar .title{display:flex;flex-direction:column}
    .brandbar .title .app{font-size:2rem; line-height:1.1; font-weight:800;} /* nome da app maior */
    .brandbar .title .sub{opacity:.8}

    /* cart√£o de login */
    .login-wrap{max-width:720px;margin:3rem auto;padding:0 1rem}
    .login-card{background:var(--bg-elev);border:1px solid var(--border);border-radius:14px;padding:2rem}
    .login-card h1{margin:0 0 1rem 0; font-size:2.25rem}
    .field{display:flex;flex-direction:column;gap:.4rem;margin:.8rem 0}
    .field input{width:100%}
    .actions{margin-top:1rem}
    .hint{margin-top:.5rem; color:var(--muted); font-size:.9rem}

    /* footer fixo ao fim */
    footer.footer{flex-shrink:0; margin-top:auto; text-align:left}
  </style>
</head>
<body>
  <header class="brandbar">
    <img src="img/logo-pm.png" alt="Pol√≠cia Mar√≠tima">
    <div class="title">
      <div class="app">IDMAR</div>
      <div class="sub">Identifica√ß√£o Mar√≠tima ‚Äî Cascos & Motores</div>
    </div>
    <div style="margin-left:auto">
      <!-- toggle de tema (opcional) -->
      <button id="idmar-theme-toggle" class="ghost" title="Dia/Noite">üåó</button>
    </div>
  </header>

  <main>
    <div class="login-wrap">
      <div class="login-card">
        <h1>Iniciar sess√£o</h1>

        <form id="loginForm" autocomplete="on">
          <div class="field">
            <label for="user">Utilizador</label>
            <input id="user" name="user" placeholder="Utilizador" autofocus>
          </div>
          <div class="field">
            <label for="pass">Palavra-passe</label>
            <input id="pass" name="pass" type="password" placeholder="Palavra-passe">
          </div>
          <div class="actions">
            <button type="submit" class="btn">Entrar</button>
          </div>
          <div class="hint">Ap√≥s entrar, ser√° redirecionado para o Validador.</div>
          <!-- opcional: credenciais demo -->
          <!-- <div class="hint">Credenciais: <code>admin</code> / <code>Admin2025</code></div> -->
        </form>
      </div>
    </div>
  </main>

  <footer class="footer">IDMAR ‚Äî v2.2.7-baseline+merge-r2.3</footer>

  <script>
    // Garantir light por defeito (caso exista prefer√™ncia antiga)
    (function(){
      try{
        if(!localStorage.getItem('idmar-theme')){
          localStorage.setItem('idmar-theme','light');
          document.documentElement.setAttribute('data-theme','light');
        }
      }catch(e){}
    })();

    // Login simples: cria sess√µes para retrocompatibilidade e segue para validador
    document.getElementById('loginForm').addEventListener('submit', function(e){
      e.preventDefault();
      try{
        sessionStorage.setItem('IDMAR_SESSION','ok');
        sessionStorage.setItem('NAV_SESSION','ok'); // retrocompatibilidade
      }catch(e){}
      location.href = 'validador.html';
    });
  </script>
</body>
</html>
