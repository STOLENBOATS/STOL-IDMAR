<!doctype html>
<html lang="pt">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>IDMAR — Admin motores (overrides locais)</title>
  <style>
    body{font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;margin:20px;max-width:900px}
    label{display:block;margin-top:10px}
    input,select,textarea{width:100%;padding:6px;border:1px solid #ccc;border-radius:8px}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .card{border:1px solid #e5e7eb;border-radius:12px;padding:12px;margin:12px 0;background:#fafafa}
    button{background:#0b6bcb;border:none;color:#fff;border-radius:10px;padding:8px 12px;cursor:pointer}
    .muted{opacity:.7}
  </style>
</head>
<body>
  <h1>Admin — Overrides de Catálogo (localStorage)</h1>
  <p class="muted">Isto escreve em <code>localStorage["IDMAR_ENGINE_OVERRIDES"]</code>. Útil para testar novas entradas sem editar o JSON.</p>
  <div class="card">
    <label>Marca</label>
    <select id="brand">
      <option>Yamaha</option><option>Suzuki</option><option>Honda</option><option>Mercury</option>
      <option>Tohatsu</option><option>Evinrude/Johnson</option><option>Volvo Penta</option><option>MerCruiser</option>
    </select>
    <div class="row">
      <div>
        <label>hp_list (valores separados por vírgulas)</label>
        <input id="hp" placeholder="ex.: 2.5,4,6,8,9.9,15,20,25,30,40,50,60,70,75,90,115,150,175,200,225,250,300,425,450">
      </div>
      <div>
        <label>displacement_list (cc, separados por vírgulas)</label>
        <input id="disp" placeholder="ex.: 5559,4169,2785,1832,996">
      </div>
    </div>
    <label>model_code_list (separados por vírgulas)</label>
    <textarea id="model" rows="3" placeholder="ex.: F115,F150,VF150,XTO425"></textarea>
    <label>year_list (separados por vírgulas)</label>
    <input id="years" placeholder="ex.: 1998,1999,...,2025">
    <label>rigging (separados por vírgulas)</label>
    <input id="rig" placeholder="ex.: DEC,Mechanical">
    <label>shaft_options (separados por vírgulas)</label>
    <input id="shaft" placeholder="ex.: S,L,X,U,XX">
    <div style="margin-top:10px">
      <button id="save">Guardar override</button>
      <button id="clear" style="background:#ef4444">Limpar todos</button>
    </div>
  </div>
  <pre id="out" class="card"></pre>

<script>
const KEY='IDMAR_ENGINE_OVERRIDES';
const $=id=>document.getElementById(id);
function parseList(str, mapFn){ return (str||'').split(',').map(s=>s.trim()).filter(Boolean).map(mapFn||((x)=>x)); }

function load(){ try{ return JSON.parse(localStorage.getItem(KEY)||'{}'); }catch(e){ return {}; } }
function save(obj){ localStorage.setItem(KEY, JSON.stringify(obj, null, 2)); }

function render(){ $('out').textContent = localStorage.getItem(KEY)||'{}'; }

$('save').onclick = function(){
  const brand=$('brand').value;
  const hp=parseList($('hp').value, Number).filter(x=>!isNaN(x));
  const disp=parseList($('disp').value, Number).filter(x=>!isNaN(x));
  const model=parseList($('model').value);
  const years=parseList($('years').value, Number).filter(x=>!isNaN(x));
  const rig=parseList($('rig').value);
  const shaft=parseList($('shaft').value);
  const all=load();
  all[brand]=all[brand]||{};
  if(hp.length) all[brand].hp_list = (all[brand].hp_list||[]).concat(hp);
  if(disp.length) all[brand].displacement_list = (all[brand].displacement_list||[]).concat(disp);
  if(model.length) all[brand].model_code_list = (all[brand].model_code_list||[]).concat(model);
  if(years.length) all[brand].year_list = (all[brand].year_list||[]).concat(years);
  if(rig.length) all[brand].rigging = (all[brand].rigging||[]).concat(rig);
  if(shaft.length) all[brand].shaft_options = (all[brand].shaft_options||[]).concat(shaft);
  save(all);
  render();
};

$('clear').onclick = function(){
  localStorage.removeItem(KEY);
  render();
};

render();
</script>
</body>
</html>
