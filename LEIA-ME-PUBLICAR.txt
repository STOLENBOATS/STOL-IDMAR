# STOL-IDMAR ‚Äî pacote para publicar (JS + CSS)

Estes ficheiros **n√£o removem** funcionalidades: apenas **acrescentam** (Forense em WIN/Motor; filtros/ordenar nos hist√≥ricos) e corrigem compatibilidade.

## 1) Ficheiros inclu√≠dos
- `js/validador-win.js`
- `js/validador-motor.js`
- `js/historico-win.js`
- `js/historico-motor.js`
- `js/utils.js` (opcional ‚Äî apenas se quiseres a vers√£o robusta de `fmtDate`/helpers)
- `css/forense.css` (opcional ‚Äî estilo do painel Forense)

## 2) Substituir no reposit√≥rio
Copiar estes ficheiros para as mesmas pastas do reposit√≥rio `STOL-IDMAR` (GitHub Pages).

## 3) Furando cache do Pages (IMPORTANTE)
Atualiza as p√°ginas HTML para acrescentar `?v=2025-09-12-1452` nos `<script>` (evita servir JS antigo do CDN).

### 3.1 `validador.html`
Coloca antes do `</body>` (na ordem):
```html
<link rel="stylesheet" href="css/forense.css?v=2025-09-12-1452">
<script src="js/utils.js?v=2025-09-12-1452"></script>
<script src="js/validador-win.js?v=2025-09-12-1452"></script>
<script src="js/validador-motor.js?v=2025-09-12-1452"></script>
```

### 3.2 `historico_win.html`
```html
<script src="js/utils.js?v=2025-09-12-1452"></script>
<script src="js/historico-win.js?v=2025-09-12-1452"></script>
```

### 3.3 `historico_motor.html`
```html
<script src="js/utils.js?v=2025-09-12-1452"></script>
<script src="js/historico-motor.js?v=2025-09-12-1452"></script>
```

## 4) IDs esperados (com fallback)
- WIN: formul√°rio `formWin` (ou `winForm`), input foto `winPhoto`
- Motor: formul√°rio `formMotor` (ou `motorForm`), input foto `motorPhoto`
Se os IDs forem outros, o painel Forense ainda assim √© inserido **no fim do formul√°rio**.

## 5) O que vais ver
- Validador WIN: painel Forense com *Rebites / Cord√µes de solda / Placa remarcada / Camadas de tinta* + **Notas**.
- Validador Motor: painel Forense com *Etiqueta adulterada / Core plug / Boss / Bloco* + **Notas**.
- Ambos: se houver foto, √© calculado **SHA-256** (UI n√£o bloqueia). Ap√≥s gravar, o √∫ltimo registo leva `forense: { hash, flags, notes }`.
- Hist√≥ricos (WIN/Motor): pesquisa, filtro por V√°lido/Inv√°lido, intervalo de datas, ordena√ß√£o por mais recente, √≠cone üß™ quando existir `forense`.

## 6) Limpar caches
Depois do commit no GitHub, faz um **hard refresh** (Ctrl+F5). Se usares Cloudflare/afins, invalida o cache.

‚Äî Fim ‚Äî
