<!doctype html>
<html lang="pt" data-theme="light">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>IDMAR â€” Validador</title>

  <!-- CSS do teu projeto -->
  <link rel="icon" href="img/favicon.png"/>
  <link rel="stylesheet" href="css/styles.css"/>
  <link rel="stylesheet" href="css/idmar-theme.css"/>

  <style>
    /* pequenos ajustes visuais (opcional) */
    .container{max-width:1100px;margin:1.25rem auto;padding:0 1rem}
    .panel{background:var(--bg-elev);border:1px solid var(--border);border-radius:12px;padding:1rem;margin:.75rem 0}
    .resultado{min-height:3rem}
    .topbar{display:flex;align-items:center;gap:.75rem;padding:1rem;border-bottom:1px solid var(--border);background:var(--bg-elev)}
    .topbar img{height:36px}
    .topbar .title{display:flex;flex-direction:column}
    .topbar .title .app{font-weight:800}
    nav.main a{margin-right:1rem}
    h1{margin:1rem 0}
  </style>
</head>
<body>
  <!-- HEADER / NAVIGATION -->
  <header class="topbar">
    <img src="img/logo-pm.png" alt="PolÃ­cia MarÃ­tima">
    <div class="title">
      <span class="app">IDMAR</span>
      <small>IdentificaÃ§Ã£o MarÃ­tima â€” Cascos & Motores</small>
    </div>
    <nav class="main" style="margin-left:1rem;">
      <a href="validador.html">Validador</a>
      <a href="historico_win.html">HistÃ³rico WIN</a>
      <a href="historico_motor.html">HistÃ³rico Motor</a>
      <a href="forense.html">Forense</a>
      <a href="#" onclick="sessionStorage.clear();location.href='login.html'">Sair</a>
    </nav>
    <div style="margin-left:auto">
      <button id="idmar-theme-toggle" class="ghost" title="Dia/Noite">ðŸŒ—</button>
    </div>
  </header>

  <main class="container">
    <!-- WIN -->
    <h1>Validador WIN</h1>
    <form id="winForm" class="panel" data-form="win">
      <label for="winInput">WIN / HIN</label>
      <input id="winInput" placeholder="Ex.: PT-ABC12345D404" autocomplete="on">
      <div style="margin-top:.5rem">
        <button id="btnWin" type="submit" class="btn">Validar WIN</button>
      </div>
      <!-- opcional: certificado para regra prÃ©-1998 -->
      <label style="display:inline-flex;gap:.5rem;align-items:center;margin-top:.6rem">
        <input type="checkbox" id="winCert"> Certificado BV / Notified Body (prÃ©-1998)
      </label>
    </form>
    <section id="win-output" class="panel">
      <h2>Resultado WIN</h2>
      <div id="winResult" class="resultado"></div>
    </section>

    <hr/>

    <!-- MOTOR -->
    <h1>Validador Motor</h1>
    <form id="motorForm" class="panel" data-form="motor">
      <div style="display:grid;grid-template-columns:240px 1fr 1fr;gap:.6rem;align-items:end">
        <div>
          <label for="brandSelect">Marca</label>
          <select id="brandSelect" name="brand">
            <option value="">â€”</option>
            <option>Yamaha</option><option>Honda</option><option>Suzuki</option>
            <option>Tohatsu</option><option>Mercury</option><option>MerCruiser</option>
            <option>Volvo Penta</option><option>Yanmar</option><option>Evinrude/Johnson</option>
          </select>
        </div>
        <div>
          <label for="modelInput">Modelo (opcional)</label>
          <input id="modelInput" name="model" placeholder="Modelo (opcional)">
        </div>
        <div>
          <label for="snInput">S/N</label>
          <input id="snInput" name="sn" placeholder="NÃºmero de sÃ©rie">
        </div>
      </div>

      <!-- campos dinÃ¢micos por marca (o teu JS preenche aqui) -->
      <div id="brandDynamic" style="margin-top:.6rem"></div>

      <div style="margin-top:.6rem">
        <label for="motorPhoto">Foto (opcional)</label>
        <input id="motorPhoto" type="file" accept="image/*">
      </div>

      <div style="margin-top:.6rem">
        <button id="btnMotor" type="submit" class="btn">Validar Motor</button>
      </div>
    </form>
    <section id="motor-output" class="panel">
      <h2>Resultado Motor</h2>
      <div id="motorResult" class="resultado"></div>
    </section>
  </main>

  <footer class="footer">IDMAR â€” v2.2.7-baseline+merge</footer>

  <!-- ====================== SCRIPTS NO FIM (CORREÃ‡ÃƒO A) ====================== -->
  <!-- 1) Bootstrap do NAV + bridge (garante IDs e helpers esperados pelos teus JS) -->
  <script>
    window.IDMAR=window.IDMAR||{};
    window.NAV=window.NAV||window.IDMAR;
    // sessÃ£o retrocompatÃ­vel
    try{
      if(!sessionStorage.getItem('IDMAR_SESSION') && sessionStorage.getItem('NAV_SESSION')==='ok'){
        sessionStorage.setItem('IDMAR_SESSION','ok');
      }
    }catch(e){}
  </script>
  <script src="js/idmar-compat-bridge.r3.js?v=r3"></script>

  <!-- 2) (Opcional) utilitÃ¡rios/tema/i18n/histÃ³rico se jÃ¡ estÃ¡s a usar -->
  <script src="js/idmar-one.r3.js"></script>

  <!-- 3) VALIDADORES (depois do DOM) -->
  <script src="js/validador-win.js?v=r3"></script>
  <!-- add-on: regras / tabela interpretativa WIN -->
  <script src="js/idmar-win-rules.r3.js?v=r3"></script>

  <script src="js/validador-motor.js?v=r3"></script>
  <!-- ======================================================================== -->
</body>
</html>
