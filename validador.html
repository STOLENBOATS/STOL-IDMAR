<!doctype html>
<html lang="pt"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>N.A.V ‚Äî Validador</title>
<link rel="stylesheet" href="css/styles.css">
<script>if(sessionStorage.getItem('nav_session')!=='ok'){alert('Sess√£o expirada. Fa√ßa login.');location.replace('login.html');}</script>
</head><body>


<script>
(function(){
  try {
    const ok = sessionStorage.getItem('NAV_SESSION')==='ok' || sessionStorage.getItem('IDMAR_SESSION')==='ok';
    const isLogin = /login\.html$/i.test(location.pathname) || document.title.toLowerCase().includes('login');
    if(!ok && !isLogin){ location.href = 'login.html'; }
  } catch(e) {}
})();
</script>


<script>
(function(){
  try {
    const ok = (sessionStorage.getItem('NAV_SESSION')==='ok'
      || sessionStorage.getItem('IDMAR_SESSION')==='ok'
      || sessionStorage.getItem('nav_session')==='ok');
    const isLogin = /login\.html$/i.test(location.pathname) || (document.title||'').toLowerCase().includes('login');
    if(!ok && !isLogin){ location.href = 'login.html'; }
  } catch(e) {}
})();
</script>

<header class="app-header">
  <div class="brand">
    <img src="img/logo-pm.png" alt="Pol√≠cia Mar√≠tima" class="logo">
    <div class="titles">
      <h1>IDMAR <span class="title-descriptor">Identifica√ß√£o Mar√≠tima ‚Äî Cascos &amp; Motores</span></h1>
      <p class="subtitle"><span class="sub-en">(Maritime Identifications ‚Äî WIN/HIN &amp; Engines)</span></p>
    </div>
  </div>
  <nav class="main-nav"><button id=\"themeToggle\" class=\"btn-icon\" title=\"Alternar tema\">üåô</button>
    <a href="validador.html">Validador</a>
    <a href="historico_win.html">Hist√≥rico WIN</a>
    <a href="historico_motor.html">Hist√≥rico Motor</a>
    <a href="forense.html">Forense</a>
    <a href="login.html" onclick="try{sessionStorage.clear();localStorage.setItem('IDMAR_LAST_LOGOUT',Date.now())}catch(e){}">Sair</a>
  </nav>
</header>

<main class="container">
  <div class="grid grid-2">
    <section class="card">
      <h2>Validador WIN<div class="small">Hull Identification Number</div></h2>
      <form id="formWin">
        <label>WIN (UE:14 / EUA:16)<div class="en">HIN (EU:14 / US:16)</div></label>
        <input id="win" maxlength="20" placeholder="FR-CNBZA135A612">
        <label class="small">Foto opcional / Optional photo</label>
        <input type="file" id="winPhoto" accept="image/*">
        <div style="margin-top:10px;"><button class="btn primary" type="submit">Validar WIN / Validate HIN</button></div>
      </form>
      <div id="winOut" style="margin-top:10px;"></div>
      <div class="table-wrap" style="margin-top:10px;">
        <table class="interp-table">
          <thead><tr><th>Campo / Field</th><th>Valor / Value</th><th>Interpreta√ß√£o / Meaning</th></tr></thead>
          <tbody id="interpWinBody"></tbody>
        </table>
      </div>
    </section>

    <section class="card">
      <h2>Validador Motor<div class="small">Engine Serial Validator</div></h2>
      <form id="formMotor" class="grid">
        <div><label>Marca<div class="en">Brand</div></label>
          <select id="brand">
            <option>Yamaha</option><option>Honda</option><option>Suzuki</option><option>Tohatsu</option>
            <option>Mercury</option><option>MerCruiser</option><option>Volvo Penta</option><option>Yanmar</option>
            <option>Evinrude/Johnson</option>
          </select>
        </div>

        <div id="brandFields" class="brand-fields"></div>
        <div class="hr"></div>
        <h3>Pesquisa t√©cnica / Technical search</h3>
        <div class="grid grid-3">
          <div><label>Modelo<div class="en">Model</div></label><input id="srch_model" placeholder="ex.: DF140A / BF150A / F350NSA"></div>
          <div><label>Pot√™ncia (hp)<div class="en">Power (hp)</div></label><input id="srch_power" placeholder="ex.: 150"></div>
          <div><label>Cilindrada (cc)<div class="en">Displacement (cc)</div></label><input id="srch_disp" placeholder="ex.: 2394"></div>
          <div><label>Ano<div class="en">Year</div></label><input id="srch_year" placeholder="ex.: 2019"></div>
          <div><label>Origem<div class="en">Origin</div></label><input id="srch_origin" placeholder="ex.: JP / US / TH / CN"></div>
        </div>

        <div class="hr"></div>
        <h3>Identifica√ß√£o de s√©rie / Serial identification</h3>
        <div id="brandDynamic" class="grid"></div>
        <div id="brandHint" class="small" style="margin-top:6px;"></div>
        <div id="brandNote" class="small" style="margin-top:6px;"></div>

        <label class="small">Foto opcional / Optional photo</label>
        <input type="file" id="motorPhoto" accept="image/*">
        <div style="margin-top:10px;"><button class="btn primary" type="submit">Validar Motor / Validate Engine</button></div>
      </form>
      <div id="motorOut" style="margin-top:10px;"></div>
    </section>
  </div>
</main>
<footer class="app-footer">
  <p>IDMAR ‚Äî v2.2.7-baseline+merge-r1 ‚Äî 2025-09-11</p>
</footer>
<script src="js/config.js"></script><script src="js/app.js"></script><script src="js/utils.js"></script>
<script src="js/validador-win.js"></script><script src="js/validador-motor.js"></script>
  <script src="js/hin-rules.patch.v1.js"></script>
  <script src="js/theme.js"></script>
</body></html>