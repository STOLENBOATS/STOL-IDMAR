/* hook */
document.addEventListener('DOMContentLoaded',function(){const wf=document.querySelector('form#winForm, form[data-form="win"], form[action*="win"]');const wi=document.querySelector('#winInput, input[name="win"], input[name="hin"]');const wb=document.querySelector('#btnWin, button[name="validate_win"], button#validateWin');function gst(){const el=document.querySelector('#win-output .status, #win-output .resultado, #winResult .status, #winResult, .win-result .status');const t=el&&el.textContent||'';var s='';if(/inv[aá]lid/i.test(t))s='inválido';else if(/v[aá]lid/i.test(t))s='válido';return s}function sw(){const v=(wi&&wi.value||'').trim();if(!v)return;const s=gst();window.IDMAR_HIST&&IDMAR_HIST.save('win',{type:'win',win:v,status:s})}if(wf){wf.addEventListener('submit',function(){setTimeout(sw,80)})}if(wb){wb.addEventListener('click',function(){setTimeout(sw,80)})}const mf=document.querySelector('form#motorForm, form[data-form="motor"], form[action*="motor"]');const si=document.querySelector('#snInput, input[name="serial"], input[name="sn"], input[name="engine_sn"]');const bs=document.querySelector('#brandSelect, select[name="brand"], select[name="marca"]');const mi=document.querySelector('#modelInput, input[name="model"], input[name="modelo"]');const mb=document.querySelector('#btnMotor, button[name="validate_motor"], button#validateMotor');function gstM(){const el=document.querySelector('#motor-output .status, #motor-output .resultado, #motorResult .status, #motorResult, .motor-result .status');const t=el&&el.textContent||'';var s='';if(/inv[aá]lid/i.test(t))s='inválido';else if(/v[aá]lid/i.test(t))s='válido';return s}function sm(){const sn=(si&&si.value||'').trim();if(!sn)return;const b=(bs&&bs.value)||'';const m=(mi&&mi.value)||'';const s=gstM();window.IDMAR_HIST&&IDMAR_HIST.save('motor',{type:'motor',sn:sn,brand:b,model:m,status:s})}if(mf){mf.addEventListener('submit',function(){setTimeout(sm,80)})}if(mb){mb.addEventListener('click',function(){setTimeout(sm,80)})}});
