<!DOCTYPE html>

<html lang="pt">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<!-- CSS base -->
<link href="css/styles.css" rel="stylesheet"/>
<link href="css/theme-soft-light.v1.css" rel="stylesheet"/>
<link href="css/nav-ribbon.v5.css" rel="stylesheet"/><!-- os botões novos -->
<!-- Versão + branding -->
<script>window.IDMAR_VERSION="Vs 1.3";</script>
<script defer="" src="js/idmar-config.v4.js"></script>
<!-- Header/i18n (core) -->
<script defer="" src="js/idmar-i18n.js"></script>
<script defer="" src="js/idmar-header-only.all.v4.js"></script>
<!-- Overrides -->
<script defer="" src="js/header-override.v4.js"></script>
<script defer="" src="js/i18n-boot.js"></script>
<script defer="" src="js/idmar-version.v4.js"></script>
</head>
<body><header class="app-header"></header>
<!-- header é injetado por JS -->
<main class="container">
<h1>Forense — Índice</h1>
<section class="panel">
<h2>Carregar evidências</h2>
<div class="row" style="display:flex;gap:.5rem;flex-wrap:wrap">
<input accept="image/*" id="evPhotos" multiple="" type="file"/>
<select id="evContext">
<option value="win">Contexto: WIN/HIN</option>
<option value="motor">Contexto: Motor</option>
</select>
<button id="evAttach">Anexar ao histórico mais recente</button>
</div>
<div class="meta" id="evMeta" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:.5rem;margin-top:.5rem"></div>
<div class="thumbs" id="evThumbs" style="display:flex;gap:.5rem;flex-wrap:wrap"></div>
</section>
<section class="panel">
<h2>Workspace</h2>
<div class="row" style="display:flex;gap:.5rem;flex-wrap:wrap">
<button id="lbOpen">Abrir lightbox</button>
<label>Comparar <input id="cmpRange" max="100" min="0" type="range" value="50"/></label>
<button id="addRect">Anotar (rect)</button>
<button id="clearRects">Limpar anotações</button>
<button id="exportPNG">Exportar PNG anotado</button>
<button id="saveBundle">Guardar “bundle” (JSON)</button>
<input accept=".json" id="loadBundle" type="file"/>
</div>
<div class="canvas-wrap" style="position:relative;border:1px solid var(--border);border-radius:10px;overflow:hidden;background:#f1f5f9;height:540px">
<canvas id="evCanvas" style="display:block;width:100%;height:100%"></canvas>
</div>
<small>Dica: a comparação usa a 1ª e a 2ª foto; as anotações servem para redacção/realce.</small>
</section>
<section class="panel">
<h2>Checklist forense</h2>
<div class="checkboxes" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:.35rem">
<label><input id="chk_rebites" type="checkbox"/> Rebites inconsistentes/añadidos</label>
<label><input id="chk_solda" type="checkbox"/> Cordões de solda anómalos</label>
<label><input id="chk_placa" type="checkbox"/> Placa remarcada/substituída</label>
<label><input id="chk_tinta" type="checkbox"/> Camadas de tinta/abrasões</label>
<label><input id="chk_etq" type="checkbox"/> Etiqueta adulterada/ausente (motor)</label>
<label><input id="chk_core" type="checkbox"/> Core plug danificado/removido (motor)</label>
<label><input id="chk_boss" type="checkbox"/> Solda/corrosão anómala no boss (motor)</label>
<label><input id="chk_bloco" type="checkbox"/> Remarcação no bloco (motor)</label>
</div>
<label>Notas</label>
<textarea id="notes" placeholder="Observações técnicas…" rows="4" style="width:100%;border:1px solid var(--border);border-radius:10px;padding:.5rem .6rem;background:#fff"></textarea>
</section>
</main>

<div class="lightbox" id="lightbox" style="position:fixed;inset:0;background:rgba(15,23,42,.85);display:none;align-items:center;justify-content:center;z-index:50">
<img alt="" id="lbImg" style="max-width:90vw;max-height:90vh;border-radius:12px;box-shadow:0 10px 40px rgba(0,0,0,.5)"/>
</div>
<!-- (limpo) removido idmar-layout.r3c.js -->
<script src="js/forense-r1.js?v=r1"></script>
<footer>
<div class="small">IDMAR · <span data-i18n="app.subtitle">Identificação Marítima — Cascos &amp; Motores</span></div>
</footer><script defer="True" src="js/i18n-overlay.js"></script><script defer="True" src="js/sync-bootstrap.js"></script><script defer="True" src="js/hotfix-history-inject.js"></script></body>
</html>
